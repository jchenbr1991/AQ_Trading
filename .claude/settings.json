{
  "permissions": {
    "allow": [
      "Bash(pytest:*)",
      "Bash(cd backend && pytest:*)",
      "Bash(python -m pytest:*)",
      "Bash(git status)",
      "Bash(git add *)",
      "Bash(git commit *)",
      "Bash(git log *)",
      "Bash(git diff *)",
      "Bash(git checkout -b *)",
      "Bash(git branch *)",
      "Bash(git switch *)",
      "Bash(ls *)",
      "Bash(cat *)",
      "Bash(head *)",
      "Bash(tail *)",
      "Bash(pip install *)",
      "Bash(pip list *)",
      "Bash(npm install *)",
      "Bash(npm test *)",
      "Bash(npm run *)",
      "Bash(python *)",
      "Bash(uvicorn *)",
      "Bash(alembic *)",
      "Bash(mkdir *)",
      "Bash(pre-commit *)",
      "Bash(ruff *)",
      "Bash(codex review *)",
      "Bash(gemini -p *)"
    ],
    "deny": [
      "Bash(rm -rf *)",
      "Bash(rm -r *)",
      "Bash(sudo *)",
      "Bash(chmod 777 *)",
      "Bash(curl *)",
      "Bash(wget *)",
      "Bash(ssh *)",
      "Bash(scp *)",
      "Bash(rsync *)",
      "Bash(git push --force *)",
      "Bash(git push -f *)",
      "Bash(git reset --hard *)",
      "Bash(git clean -f *)",
      "Bash(git checkout main)",
      "Bash(git checkout master)",
      "Bash(git switch main)",
      "Bash(git switch master)",
      "Bash(docker run *)",
      "Bash(eval *)",
      "Bash(exec *)",
      "Bash(> /dev/*)",
      "Bash(| sh)",
      "Bash(| bash)"
    ],
    "ask": [
      "Bash(rm *)",
      "Bash(git push *)",
      "Bash(docker *)"
    ]
  },
  "filePermissions": {
    "allow": [
      "backend/src/**/*",
      "backend/tests/**/*",
      "backend/alembic/**/*",
      "config/**/*",
      "docs/**/*",
      ".claude/**/*",
      ".pre-commit-config.yaml",
      "pyproject.toml",
      "requirements*.txt"
    ],
    "deny": [
      "**/.env",
      "**/.env.*",
      "**/secrets.*",
      "**/credentials.*",
      "**/*.pem",
      "**/*.key",
      "strategies/live/**/*"
    ],
    "ask": [
      "frontend/**/*",
      ".github/**/*"
    ]
  },
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "filepath=\"$CLAUDE_FILE_PATH\"; if echo \"$filepath\" | grep -qv '\\.py$'; then exit 0; fi; if echo \"$filepath\" | grep -q 'backend/tests/'; then cd /home/tochat/aq_trading/backend && python -m pytest \"$filepath\" -x -q --tb=short 2>&1 | tail -15; elif echo \"$filepath\" | grep -q 'backend/src/'; then module=$(echo \"$filepath\" | sed -n 's|.*backend/src/\\([^/]*\\)/.*|\\1|p'); if [ -d \"/home/tochat/aq_trading/backend/tests/$module\" ]; then cd /home/tochat/aq_trading/backend && python -m pytest \"tests/$module/\" -x -q --tb=short -m 'not timescaledb' 2>&1 | tail -15; fi; elif echo \"$filepath\" | grep -q 'agents/'; then cd /home/tochat/aq_trading && python -m pytest agents/tests/ -x -q --tb=short 2>&1 | tail -15; fi"
          }
        ]
      }
    ]
  },
  "autoUpdate": false,
  "verbose": false
}
